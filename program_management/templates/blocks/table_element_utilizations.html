{% load i18n static %}

<table class="table table-hover">
    <thead>
    <tr>
        <th></th>
        <th>{% trans 'Code' %}</th>
        <th>{% trans 'Acronym/Short title' context 'abbreviation' %}</th>
        <th>{% trans 'Title' %}</th>
        <th>{% trans 'Cred. rel./abs.' %}</th>
        <th>{% trans 'Mandatory' %}</th>
        <th>{% trans 'Block' %}</th>
        <th>{% trans 'Formations' %}</th>
    </tr>
    </thead>
    <tbody>
    {% for row in utilization_rows %}
        <tr>
        <td> {% if row.link.is_reference %}  <img src="{% static 'img/reference.jpg' %}"> {% endif %} </td>
        <td>
            {% url 'element_identification' row.link.parent.year row.link.parent.code as url_parent_identification %}
            <a href="{{ url_parent_identification }}">{{ row.link.parent.code | default_if_none:'' }}</a>
        </td>
        <td>{{ row.link.parent.title | default_if_none:'' }}{{ row.link_parent_version_label }}</td>
        <td>{{ row.link.parent.group_title_fr | default_if_none:'' }}</td>
        <td>
            {{ row.link.relative_credits | default_if_none:'-' }} /
            {{ row.link.child.credits.normalize | default_if_none:'-' }}
        </td>
        <td>{{ row.link.is_mandatory | yesno:_("yes,no") | title }}</td>
        <td>{{ row.link.block | default_if_none:'-' }}</td>
        <td>
            {% for root in row.training_nodes %}
                <ul>
                    <li>
                        <a href="{{ root.direct_parent.root_url }}">
                            {{ root.direct_parent.title }}{{ root.direct_parent.root_version_label }}
                        </a>
                        {% if root.top_nodes %}
                            <ul>
                                {% for top_node in root.top_nodes %}
                                    {% if forloop.first %}<li>{% trans 'Included in' %} : {% else %} - {% endif %}
                                        {{ top_node.title }}{{ top_node.root_version_label }}
                                    {% if forloop.last %}</li>{% endif %}
                                {% endfor %}
                            </ul>
                        {% endif %}
                    </li>
                </ul>
            {% empty %}
                -
            {% endfor %}
        </td>
    {% endfor %}
    </tbody>
</table>
